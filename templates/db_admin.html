{% extends 'base.html' %}
{% block content %}

<div class="page-toolbar">
  <div class="page-toolbar__title">
    <h2>Database</h2>
    <div class="page-toolbar__subtitle">Admin tools for initializing SQLite and importing from Excel.</div>
  </div>
</div>

<div class="form-card">
  <div class="form-card__title">Actions</div>
  <form method="post" class="form-actions">
    <button class="btn btn--primary" type="submit" name="action" value="init">Initialize SQLite DB</button>
    <button class="btn btn--secondary" type="submit" name="action" value="import">Import Excel â†’ SQLite</button>
  </form>
</div>

<h3>Current SQLite DB</h3>
<p><strong>Path:</strong> {{ db_path }}</p>

{% if counts %}
  <div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>Table</th>
        <th>Rows</th>
      </tr>
    </thead>
    <tbody>
      {% for k, v in counts.items() %}
      <tr>
        <td>{{ k }}</td>
        <td>{{ v }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
{% else %}
  <div class="empty-state">
    <div class="empty-state__title">No database initialized yet</div>
    <div class="empty-state__hint">Initialize the DB and import from Excel to enable the SQLite backend.</div>
  </div>
{% endif %}

{% endblock %}
